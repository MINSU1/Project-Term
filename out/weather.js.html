<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: weather.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: weather.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>const request = require('request');

/**  google api with using Promise */
var geocode = (address) => {
    // return new Promise
    return new Promise((resolve, reject) => {
		request({
		    url: 'http://maps.googleapis.com/maps/api/geocode/json' +
		        '?address=' + encodeURIComponent(address),
		    json: true
		}, (error, response, body) => {
			if (error){
				reject('Cannot connect to Google Maps');
			}else if (body.status == 'ZERO_RESULTS'){
				reject('Cannot find requested address');
			}else if (body.status == 'OK'){
				resolve({
					lat: body.results[0].geometry.location.lat,
					lng: body.results[0].geometry.location.lng
				})
			}
		});
	});
};

/**  weather api with using Promise */
var weather = (lat, lng) => {
	return new Promise((resolve, reject)=> {
		request({
		    url: 'https://api.darksky.net/forecast/fb2d78ddaa5b88137bda186278187c8d/'+lat+','+lng,
		    json: true
		}, (error, response, body) => {
			if (error){
				reject('Cannot connect to Darksky.net');
				//console.log('Cannot connnect to Google Maps');
			}else if(body.code == 400){
				reject('Cannot find weather form the address');
				//console.log('Cannot find requested address');
			}else{
				resolve(body.currently);
			}
		});
	});
};

/**  google api with using Promise to find information of the restaurants*/
var distance_calc = (pointa, pointb) => {

	return new Promise((resolve, reject)=> {
		request({
		    url: "https://maps.googleapis.com/maps/api/distancematrix/json?units=imperial&amp;origins="+encodeURIComponent(pointa)+",DC&amp;destinations="+encodeURIComponent(pointb)+",NY&amp;key=AIzaSyCHXWx_trBSkgcp7PIEBrmNGI2_vAoKSuA",
		    json: true
		}, (error, response, body) => {
			if (error){
				reject('Cannot connect to Darksky.net');
				//console.log('Cannot connnect to Google Maps');
			}else if(body.code == 400){
				reject('Cannot find weather form the address');
				//console.log('Cannot find requested address');
			}else{
				if (body.rows[0].elements[0].status == "NOT_FOUND"){
					reject(body);
				}else{
					var distance = body.rows[0].elements[0].distance.text,
						ori_addr = body.origin_addresses[0],
						dest_addr = body.destination_addresses[0];

					resolve({dis:distance,ori:ori_addr,dest:dest_addr});
				}
				
				
			}
		});
	});
	

}

/** module exporting */
module.exports = {
	geocode,
	weather,
	distance_calc
}</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#address">address</a></li><li><a href="global.html#address_check">address_check</a></li><li><a href="global.html#address_finder">address_finder</a></li><li><a href="global.html#address_no_empty">address_no_empty</a></li><li><a href="global.html#app">app</a></li><li><a href="global.html#distance_calc">distance_calc</a></li><li><a href="global.html#express">express</a></li><li><a href="global.html#geocode">geocode</a></li><li><a href="global.html#initMap">initMap</a></li><li><a href="global.html#lat">lat</a></li><li><a href="global.html#login_submit">login_submit</a></li><li><a href="global.html#port">port</a></li><li><a href="global.html#readJsonFile">readJsonFile</a></li><li><a href="global.html#topButClass">topButClass</a></li><li><a href="global.html#userlog">userlog</a></li><li><a href="global.html#username">username</a></li><li><a href="global.html#weather">weather</a></li><li><a href="global.html#weather_fetcher">weather_fetcher</a></li><li><a href="global.html#writeJsonFile">writeJsonFile</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Thu Apr 26 2018 18:24:21 GMT-0700 (Pacific Daylight Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
